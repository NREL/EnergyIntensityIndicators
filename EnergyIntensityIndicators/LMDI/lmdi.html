

<!DOCTYPE html>
<!--[if IE 8]><html class="no-js lt-ie9" lang="en" > <![endif]-->
<!--[if gt IE 8]><!--> <html class="no-js" lang="en" > <!--<![endif]-->
<head>
  <meta charset="utf-8">
  
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  
  <title>Core LMDI Model &mdash; EnergyIntensityIndicators  documentation</title>
  

  
  
  
  

  
  <script type="text/javascript" src="../../_static/js/modernizr.min.js"></script>
  
    
      <script type="text/javascript" id="documentation_options" data-url_root="../../" src="../../_static/documentation_options.js"></script>
        <script type="text/javascript" src="../../_static/jquery.js"></script>
        <script type="text/javascript" src="../../_static/underscore.js"></script>
        <script type="text/javascript" src="../../_static/doctools.js"></script>
        <script type="text/javascript" src="../../_static/language_data.js"></script>
    
    <script type="text/javascript" src="../../_static/js/theme.js"></script>

    

  
  <link rel="stylesheet" href="../../_static/css/theme.css" type="text/css" />
  <link rel="stylesheet" href="../../_static/pygments.css" type="text/css" />
    <link rel="index" title="Index" href="../../genindex.html" />
    <link rel="search" title="Search" href="../../search.html" />
    <link rel="next" title="Multiplicative LMDI" href="EnergyIntensityIndicators.multiplicative_lmdi.html" />
    <link rel="prev" title="Welcome to EnergyIntensityIndicators’s documentation!" href="../../index.html" /> 
</head>

<body class="wy-body-for-nav">

   
  <div class="wy-grid-for-nav">
    
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search" >
          

          
            <a href="../../index.html" class="icon icon-home"> EnergyIntensityIndicators
          

          
          </a>

          
            
            
          

          
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="../../search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>

          
        </div>

        <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="main navigation">
          
            
            
              
            
            
              <p class="caption"><span class="caption-text">Contents:</span></p>
<ul class="current">
<li class="toctree-l1 current"><a class="current reference internal" href="#">Core LMDI Model</a><ul>
<li class="toctree-l2"><a class="reference internal" href="EnergyIntensityIndicators.multiplicative_lmdi.html">Multiplicative LMDI</a></li>
<li class="toctree-l2"><a class="reference internal" href="EnergyIntensityIndicators.additive_lmdi.html">AdditiveLMDI</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../Commercial/commercial.html">Commercial Sector Data Collection</a></li>
<li class="toctree-l1"><a class="reference internal" href="../Electricity/electricity.html">Electric Power Sector Data Collection</a></li>
<li class="toctree-l1"><a class="reference internal" href="../Industry/industry.html">Industrial Sector Data Collection</a></li>
<li class="toctree-l1"><a class="reference internal" href="../Residential/residential.html">Residential Sector Data Collection</a></li>
<li class="toctree-l1"><a class="reference internal" href="../Transportation/transportation.html">Transportation Sector Data Collection</a></li>
<li class="toctree-l1"><a class="reference internal" href="../supporting_files.html">Supporting Files</a></li>
<li class="toctree-l1"><a class="reference internal" href="../results.html">Results</a></li>
</ul>

            
          
        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">

      
      <nav class="wy-nav-top" aria-label="top navigation">
        
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="../../index.html">EnergyIntensityIndicators</a>
        
      </nav>


      <div class="wy-nav-content">
        
        <div class="rst-content">
        
          















<div role="navigation" aria-label="breadcrumbs navigation">

  <ul class="wy-breadcrumbs">
    
      <li><a href="../../index.html">Docs</a> &raquo;</li>
        
      <li>Core LMDI Model</li>
    
    
      <li class="wy-breadcrumbs-aside">
        
            
            <a href="../../_sources/EnergyIntensityIndicators/LMDI/lmdi.rst.txt" rel="nofollow"> View page source</a>
          
        
      </li>
    
  </ul>

  
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
            
  <div class="section" id="module-EnergyIntensityIndicators.LMDI">
<span id="core-lmdi-model"></span><h1>Core LMDI Model<a class="headerlink" href="#module-EnergyIntensityIndicators.LMDI" title="Permalink to this headline">¶</a></h1>
<dl class="class">
<dt id="EnergyIntensityIndicators.LMDI.CalculateLMDI">
<em class="property">class </em><code class="sig-prename descclassname">EnergyIntensityIndicators.LMDI.</code><code class="sig-name descname">CalculateLMDI</code><span class="sig-paren">(</span><em class="sig-param">sector</em>, <em class="sig-param">level_of_aggregation</em>, <em class="sig-param">lmdi_models</em>, <em class="sig-param">categories_dict</em>, <em class="sig-param">energy_types</em>, <em class="sig-param">directory</em>, <em class="sig-param">output_directory</em>, <em class="sig-param">primary_activity=None</em>, <em class="sig-param">base_year=1985</em>, <em class="sig-param">end_year=2017</em>, <em class="sig-param">unit_conversion_factor=1</em>, <em class="sig-param">weather_activity=None</em><span class="sig-paren">)</span><a class="headerlink" href="#EnergyIntensityIndicators.LMDI.CalculateLMDI" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <a class="reference internal" href="#EnergyIntensityIndicators.LMDI.LMDI" title="EnergyIntensityIndicators.LMDI.LMDI"><code class="xref py py-class docutils literal notranslate"><span class="pre">EnergyIntensityIndicators.LMDI.LMDI</span></code></a></p>
<dl class="method">
<dt id="EnergyIntensityIndicators.LMDI.CalculateLMDI.build_col_list">
<code class="sig-name descname">build_col_list</code><span class="sig-paren">(</span><em class="sig-param">data</em>, <em class="sig-param">key</em><span class="sig-paren">)</span><a class="headerlink" href="#EnergyIntensityIndicators.LMDI.CalculateLMDI.build_col_list" title="Permalink to this definition">¶</a></dt>
<dd><p>Return bool indicating whether dataset contains data for given key</p>
</dd></dl>

<dl class="method">
<dt id="EnergyIntensityIndicators.LMDI.CalculateLMDI.build_nest">
<code class="sig-name descname">build_nest</code><span class="sig-paren">(</span><em class="sig-param">data</em>, <em class="sig-param">select_categories</em>, <em class="sig-param">results_dict</em>, <em class="sig-param">level1_name</em>, <em class="sig-param">level_name=None</em><span class="sig-paren">)</span><a class="headerlink" href="#EnergyIntensityIndicators.LMDI.CalculateLMDI.build_nest" title="Permalink to this definition">¶</a></dt>
<dd><p>Process and organize raw data</p>
</dd></dl>

<dl class="method">
<dt id="EnergyIntensityIndicators.LMDI.CalculateLMDI.calc_lower_level">
<code class="sig-name descname">calc_lower_level</code><span class="sig-paren">(</span><em class="sig-param">categories</em>, <em class="sig-param">final_fmt_results</em>, <em class="sig-param">e_type</em><span class="sig-paren">)</span><a class="headerlink" href="#EnergyIntensityIndicators.LMDI.CalculateLMDI.calc_lower_level" title="Permalink to this definition">¶</a></dt>
<dd><p>Calculate decomposition for lower levels of aggregation</p>
</dd></dl>

<dl class="method">
<dt id="EnergyIntensityIndicators.LMDI.CalculateLMDI.calculate_breakout_lmdi">
<code class="sig-name descname">calculate_breakout_lmdi</code><span class="sig-paren">(</span><em class="sig-param">raw_results</em>, <em class="sig-param">final_results_list</em>, <em class="sig-param">level_of_aggregation</em>, <em class="sig-param">breakout</em>, <em class="sig-param">categories</em>, <em class="sig-param">lmdi_type</em><span class="sig-paren">)</span><a class="headerlink" href="#EnergyIntensityIndicators.LMDI.CalculateLMDI.calculate_breakout_lmdi" title="Permalink to this definition">¶</a></dt>
<dd><p>If breakout=True, calculate LMDI for each lower aggregation level contained in raw_results.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>raw_results</strong> (<em>dictionary</em>) – Built “nest” of dictionaries containing input data for LMDI calculations</p></li>
<li><p><strong>final_results_list</strong> (<em>list</em>) – list to which calculate_breakout_lmdi appends LMDI results</p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>list of LMDI results dataframes</p>
</dd>
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p>final_results_list [list]</p>
</dd>
</dl>
<p>TODO: Lower level Total structure (product of each structure index for multiplicative) and component
intensity index (index of aggregate intensity divided by total strucutre) need to be passed to higher level</p>
</dd></dl>

<dl class="method">
<dt id="EnergyIntensityIndicators.LMDI.CalculateLMDI.calculate_energy_data">
<code class="sig-name descname">calculate_energy_data</code><span class="sig-paren">(</span><em class="sig-param">e_type</em>, <em class="sig-param">energy_data</em><span class="sig-paren">)</span><a class="headerlink" href="#EnergyIntensityIndicators.LMDI.CalculateLMDI.calculate_energy_data" title="Permalink to this definition">¶</a></dt>
<dd><p>Calculate ‘deliv’, ‘source’, and ‘source_adj’ data from
‘fuels’ and ‘elec’ dataframes contained in the energy_data dictionary.</p>
</dd></dl>

<dl class="method">
<dt id="EnergyIntensityIndicators.LMDI.CalculateLMDI.calculate_shares">
<em class="property">static </em><code class="sig-name descname">calculate_shares</code><span class="sig-paren">(</span><em class="sig-param">dataset</em>, <em class="sig-param">total_label</em><span class="sig-paren">)</span><a class="headerlink" href="#EnergyIntensityIndicators.LMDI.CalculateLMDI.calculate_shares" title="Permalink to this definition">¶</a></dt>
<dd><p>“sum row, calculate each type of energy as percentage of total
:param dataset: energy data
:type dataset: dataframe</p>
<dl class="field-list simple">
<dt class="field-odd">Returns</dt>
<dd class="field-odd"><p><strong>shares</strong> – contains shares of each energy category relative to total energy</p>
</dd>
<dt class="field-even">Return type</dt>
<dd class="field-even"><p>dataframe</p>
</dd>
</dl>
</dd></dl>

<dl class="method">
<dt id="EnergyIntensityIndicators.LMDI.CalculateLMDI.call_lmdi">
<code class="sig-name descname">call_lmdi</code><span class="sig-paren">(</span><em class="sig-param">energy_input_data</em>, <em class="sig-param">activity_input_data</em>, <em class="sig-param">lower_level_structure</em>, <em class="sig-param">lower_level_intensity_df</em>, <em class="sig-param">total_label</em>, <em class="sig-param">unit_conversion_factor</em>, <em class="sig-param">weather_data</em>, <em class="sig-param">lmdi_type</em>, <em class="sig-param">loa=None</em>, <em class="sig-param">energy_type=None</em><span class="sig-paren">)</span><a class="headerlink" href="#EnergyIntensityIndicators.LMDI.CalculateLMDI.call_lmdi" title="Permalink to this definition">¶</a></dt>
<dd><p>Prepare LMDI inputs and pass them to call_decomposition method.</p>
<dl class="field-list simple">
<dt class="field-odd">Returns</dt>
<dd class="field-odd"><p>formatted LMDI results</p>
</dd>
<dt class="field-even">Return type</dt>
<dd class="field-even"><p>results (dataframe)</p>
</dd>
</dl>
</dd></dl>

<dl class="method">
<dt id="EnergyIntensityIndicators.LMDI.CalculateLMDI.check_cols">
<em class="property">static </em><code class="sig-name descname">check_cols</code><span class="sig-paren">(</span><em class="sig-param">dict_key</em>, <em class="sig-param">df</em>, <em class="sig-param">label</em><span class="sig-paren">)</span><a class="headerlink" href="#EnergyIntensityIndicators.LMDI.CalculateLMDI.check_cols" title="Permalink to this definition">¶</a></dt>
<dd><p>Check whether dataframe contains column matching dict_key</p>
</dd></dl>

<dl class="method">
<dt id="EnergyIntensityIndicators.LMDI.CalculateLMDI.collect_energy_data">
<code class="sig-name descname">collect_energy_data</code><span class="sig-paren">(</span><em class="sig-param">energy_data</em><span class="sig-paren">)</span><a class="headerlink" href="#EnergyIntensityIndicators.LMDI.CalculateLMDI.collect_energy_data" title="Permalink to this definition">¶</a></dt>
<dd><p>Calculate energy data for energy types in self.energy_types for which data is not provided</p>
<p>Example data:</p>
<blockquote>
<div><dl>
<dt>data_dict = {‘All_Passenger’: {‘energy’: {‘deliv’: passenger_based_energy_use},</dt><dd><blockquote>
<div><p>‘activity’: passenger_based_activity},</p>
</div></blockquote>
<dl class="simple">
<dt>‘All_Freight’: {‘energy’: {‘deliv’: freight_based_energy_use},</dt><dd><p>‘activity’: freight_based_activity}}</p>
</dd>
</dl>
</dd>
</dl>
</div></blockquote>
</dd></dl>

<dl class="method">
<dt id="EnergyIntensityIndicators.LMDI.CalculateLMDI.create_total_column">
<em class="property">static </em><code class="sig-name descname">create_total_column</code><span class="sig-paren">(</span><em class="sig-param">df</em>, <em class="sig-param">total_label</em><span class="sig-paren">)</span><a class="headerlink" href="#EnergyIntensityIndicators.LMDI.CalculateLMDI.create_total_column" title="Permalink to this definition">¶</a></dt>
<dd><p>Create column from sum of all other columns, name with name of level of aggregation</p>
</dd></dl>

<dl class="method">
<dt id="EnergyIntensityIndicators.LMDI.CalculateLMDI.deep_get">
<em class="property">static </em><code class="sig-name descname">deep_get</code><span class="sig-paren">(</span><em class="sig-param">dictionary</em>, <em class="sig-param">keys</em>, <em class="sig-param">default=None</em><span class="sig-paren">)</span><a class="headerlink" href="#EnergyIntensityIndicators.LMDI.CalculateLMDI.deep_get" title="Permalink to this definition">¶</a></dt>
<dd><p>Get lower level portion of nested dictionary from path</p>
</dd></dl>

<dl class="method">
<dt id="EnergyIntensityIndicators.LMDI.CalculateLMDI.get_deliv">
<em class="property">static </em><code class="sig-name descname">get_deliv</code><span class="sig-paren">(</span><em class="sig-param">elec</em>, <em class="sig-param">fuels</em><span class="sig-paren">)</span><a class="headerlink" href="#EnergyIntensityIndicators.LMDI.CalculateLMDI.get_deliv" title="Permalink to this definition">¶</a></dt>
<dd><p>Calculate delivered energy by adding electricity and fuels then add ‘Energy_Type’
column to the resulting delivered energy dataframe</p>
</dd></dl>

<dl class="method">
<dt id="EnergyIntensityIndicators.LMDI.CalculateLMDI.get_elec">
<em class="property">static </em><code class="sig-name descname">get_elec</code><span class="sig-paren">(</span><em class="sig-param">elec</em><span class="sig-paren">)</span><a class="headerlink" href="#EnergyIntensityIndicators.LMDI.CalculateLMDI.get_elec" title="Permalink to this definition">¶</a></dt>
<dd><p>Add ‘Energy_Type’ column to electricity dataframe</p>
</dd></dl>

<dl class="method">
<dt id="EnergyIntensityIndicators.LMDI.CalculateLMDI.get_fuels">
<em class="property">static </em><code class="sig-name descname">get_fuels</code><span class="sig-paren">(</span><em class="sig-param">fuels</em><span class="sig-paren">)</span><a class="headerlink" href="#EnergyIntensityIndicators.LMDI.CalculateLMDI.get_fuels" title="Permalink to this definition">¶</a></dt>
<dd><p>Add ‘Energy_Type’ column to fuels dataframe</p>
</dd></dl>

<dl class="method">
<dt id="EnergyIntensityIndicators.LMDI.CalculateLMDI.get_nested_lmdi">
<code class="sig-name descname">get_nested_lmdi</code><span class="sig-paren">(</span><em class="sig-param">level_of_aggregation</em>, <em class="sig-param">raw_data</em>, <em class="sig-param">lmdi_type</em>, <em class="sig-param">calculate_lmdi=False</em>, <em class="sig-param">breakout=False</em><span class="sig-paren">)</span><a class="headerlink" href="#EnergyIntensityIndicators.LMDI.CalculateLMDI.get_nested_lmdi" title="Permalink to this definition">¶</a></dt>
<dd><p>Collect LMDI decomposition according to user specifications</p>
</dd></dl>

<dl class="method">
<dt id="EnergyIntensityIndicators.LMDI.CalculateLMDI.get_source">
<code class="sig-name descname">get_source</code><span class="sig-paren">(</span><em class="sig-param">elec</em>, <em class="sig-param">fuels</em><span class="sig-paren">)</span><a class="headerlink" href="#EnergyIntensityIndicators.LMDI.CalculateLMDI.get_source" title="Permalink to this definition">¶</a></dt>
<dd><p>Call conversion factors method from GetEIAData, calculate source energy from
conversion_factors, electricity and fuels dataframe, then add ‘Energy-Type’ column
to the resulting source energy dataframe</p>
</dd></dl>

<dl class="method">
<dt id="EnergyIntensityIndicators.LMDI.CalculateLMDI.get_source_adj">
<code class="sig-name descname">get_source_adj</code><span class="sig-paren">(</span><em class="sig-param">elec</em>, <em class="sig-param">fuels</em><span class="sig-paren">)</span><a class="headerlink" href="#EnergyIntensityIndicators.LMDI.CalculateLMDI.get_source_adj" title="Permalink to this definition">¶</a></dt>
<dd><p>Call conversion factors method from GetEIAData, calculate source adjusted energy from
conversion_factors, electricity and fuels dataframe, then add ‘Energy-Type’ column
to the resulting source adjusted energy dataframe</p>
</dd></dl>

<dl class="method">
<dt id="EnergyIntensityIndicators.LMDI.CalculateLMDI.int_index">
<em class="property">static </em><code class="sig-name descname">int_index</code><span class="sig-paren">(</span><em class="sig-param">df</em><span class="sig-paren">)</span><a class="headerlink" href="#EnergyIntensityIndicators.LMDI.CalculateLMDI.int_index" title="Permalink to this definition">¶</a></dt>
<dd><p>Ensure df index is Year of type int</p>
</dd></dl>

<dl class="method">
<dt id="EnergyIntensityIndicators.LMDI.CalculateLMDI.logarithmic_average">
<em class="property">static </em><code class="sig-name descname">logarithmic_average</code><span class="sig-paren">(</span><em class="sig-param">x</em>, <em class="sig-param">y</em><span class="sig-paren">)</span><a class="headerlink" href="#EnergyIntensityIndicators.LMDI.CalculateLMDI.logarithmic_average" title="Permalink to this definition">¶</a></dt>
<dd><p>The logarithmic average of two positive numbers x and y</p>
</dd></dl>

<dl class="method">
<dt id="EnergyIntensityIndicators.LMDI.CalculateLMDI.merge_input_data">
<code class="sig-name descname">merge_input_data</code><span class="sig-paren">(</span><em class="sig-param">list_dfs</em>, <em class="sig-param">second_index</em><span class="sig-paren">)</span><a class="headerlink" href="#EnergyIntensityIndicators.LMDI.CalculateLMDI.merge_input_data" title="Permalink to this definition">¶</a></dt>
<dd><p>Merge dataframes of same variable type</p>
</dd></dl>

<dl class="method">
<dt id="EnergyIntensityIndicators.LMDI.CalculateLMDI.nominal_energy_intensity">
<code class="sig-name descname">nominal_energy_intensity</code><span class="sig-paren">(</span><em class="sig-param">energy_input_data</em>, <em class="sig-param">activity_input_data</em><span class="sig-paren">)</span><a class="headerlink" href="#EnergyIntensityIndicators.LMDI.CalculateLMDI.nominal_energy_intensity" title="Permalink to this definition">¶</a></dt>
<dd><p>Calculate nominal energy intensity (i.e. energy divided by activity)</p>
</dd></dl>

<dl class="method">
<dt id="EnergyIntensityIndicators.LMDI.CalculateLMDI.order_categories">
<code class="sig-name descname">order_categories</code><span class="sig-paren">(</span><em class="sig-param">level_of_aggregation</em>, <em class="sig-param">raw_results</em><span class="sig-paren">)</span><a class="headerlink" href="#EnergyIntensityIndicators.LMDI.CalculateLMDI.order_categories" title="Permalink to this definition">¶</a></dt>
<dd><p>Order categories so that lower levels are calculated prior to current level of aggregation.
This ordering ensures that lower level structure is passed to higher level.</p>
</dd></dl>

<dl class="method">
<dt id="EnergyIntensityIndicators.LMDI.CalculateLMDI.prepare_lmdi_inputs">
<code class="sig-name descname">prepare_lmdi_inputs</code><span class="sig-paren">(</span><em class="sig-param">energy_type</em>, <em class="sig-param">energy_input_data</em>, <em class="sig-param">activity_input_data</em>, <em class="sig-param">lower_level_intensity_df</em>, <em class="sig-param">total_label</em>, <em class="sig-param">weather_data</em>, <em class="sig-param">unit_conversion_factor=1</em><span class="sig-paren">)</span><a class="headerlink" href="#EnergyIntensityIndicators.LMDI.CalculateLMDI.prepare_lmdi_inputs" title="Permalink to this definition">¶</a></dt>
<dd><p>Calculate the LMDI inputs (collect log ratio components)</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>activity_input_data</strong> (<em>dataframe</em><em> or </em><em>dictionary of dataframes</em>) – Activity input data for LMDI calculations</p></li>
<li><p><strong>energy_input_data</strong> (<em>dataframe</em>) – Energy input data for LMDI calculations</p></li>
<li><p><strong>total_label</strong> (<em>str</em>) – Name of the level of the level of aggregation representing the total of the current level.
E.g. If categories are “Northeast”, “South”, etc, the total_label is “National”</p></li>
<li><p><strong>unit_conversion_factor</strong> (<em>int</em><em>, </em><em>optional</em>) – [description]. Defaults to 1.</p></li>
</ul>
</dd>
</dl>
</dd></dl>

<dl class="method">
<dt id="EnergyIntensityIndicators.LMDI.CalculateLMDI.select_value">
<em class="property">static </em><code class="sig-name descname">select_value</code><span class="sig-paren">(</span><em class="sig-param">dataframe</em>, <em class="sig-param">base_row</em>, <em class="sig-param">base_column</em><span class="sig-paren">)</span><a class="headerlink" href="#EnergyIntensityIndicators.LMDI.CalculateLMDI.select_value" title="Permalink to this definition">¶</a></dt>
<dd><p>Select value from dataframe as in Excel’s &#64;index function</p>
</dd></dl>

</dd></dl>

<dl class="class">
<dt id="EnergyIntensityIndicators.LMDI.LMDI">
<em class="property">class </em><code class="sig-prename descclassname">EnergyIntensityIndicators.LMDI.</code><code class="sig-name descname">LMDI</code><span class="sig-paren">(</span><em class="sig-param">sector</em>, <em class="sig-param">lmdi_models</em>, <em class="sig-param">output_directory</em>, <em class="sig-param">base_year</em>, <em class="sig-param">end_year</em>, <em class="sig-param">primary_activity</em><span class="sig-paren">)</span><a class="headerlink" href="#EnergyIntensityIndicators.LMDI.LMDI" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <code class="xref py py-class docutils literal notranslate"><span class="pre">object</span></code></p>
<p>Base class for LMDI</p>
<dl class="attribute">
<dt id="EnergyIntensityIndicators.LMDI.LMDI.LMDI_types">
<code class="sig-name descname">LMDI_types</code><em class="property"> = {'additive': &lt;class 'EnergyIntensityIndicators.additive_lmdi.AdditiveLMDI'&gt;, 'multiplicative': &lt;class 'EnergyIntensityIndicators.multiplicative_lmdi.MultiplicativeLMDI'&gt;}</em><a class="headerlink" href="#EnergyIntensityIndicators.LMDI.LMDI.LMDI_types" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="method">
<dt id="EnergyIntensityIndicators.LMDI.LMDI.calc_ASI">
<code class="sig-name descname">calc_ASI</code><span class="sig-paren">(</span><em class="sig-param">model</em>, <em class="sig-param">log_mean_divisia_weights_normalized</em>, <em class="sig-param">log_ratios</em>, <em class="sig-param">total_label</em><span class="sig-paren">)</span><a class="headerlink" href="#EnergyIntensityIndicators.LMDI.LMDI.calc_ASI" title="Permalink to this definition">¶</a></dt>
<dd><p>Collect activity, structure, and intensity components</p>
</dd></dl>

<dl class="method">
<dt id="EnergyIntensityIndicators.LMDI.LMDI.calc_component">
<code class="sig-name descname">calc_component</code><span class="sig-paren">(</span><em class="sig-param">log_ratio_component</em>, <em class="sig-param">weights</em>, <em class="sig-param">type_</em>, <em class="sig-param">primary_activity</em><span class="sig-paren">)</span><a class="headerlink" href="#EnergyIntensityIndicators.LMDI.LMDI.calc_component" title="Permalink to this definition">¶</a></dt>
<dd><p>Calculate the component values from log_ratio components and log mean divisia weights</p>
</dd></dl>

<dl class="method">
<dt id="EnergyIntensityIndicators.LMDI.LMDI.calculate_log_changes">
<em class="property">static </em><code class="sig-name descname">calculate_log_changes</code><span class="sig-paren">(</span><em class="sig-param">dataset</em><span class="sig-paren">)</span><a class="headerlink" href="#EnergyIntensityIndicators.LMDI.LMDI.calculate_log_changes" title="Permalink to this definition">¶</a></dt>
<dd><p>Calculate the log changes
Parameters:
———-</p>
<blockquote>
<div><p>dataset: dataframe</p>
</div></blockquote>
<blockquote>
<div><p>log_ratio: dataframe</p>
</div></blockquote>
</dd></dl>

<dl class="method">
<dt id="EnergyIntensityIndicators.LMDI.LMDI.call_decomposition">
<code class="sig-name descname">call_decomposition</code><span class="sig-paren">(</span><em class="sig-param">energy_data</em>, <em class="sig-param">energy_shares</em>, <em class="sig-param">log_ratios</em>, <em class="sig-param">total_label</em>, <em class="sig-param">lmdi_type</em>, <em class="sig-param">loa</em>, <em class="sig-param">energy_type</em><span class="sig-paren">)</span><a class="headerlink" href="#EnergyIntensityIndicators.LMDI.LMDI.call_decomposition" title="Permalink to this definition">¶</a></dt>
<dd><p>Calculate Log Mean Divisia Index from input data</p>
</dd></dl>

<dl class="method">
<dt id="EnergyIntensityIndicators.LMDI.LMDI.data_visualization">
<code class="sig-name descname">data_visualization</code><span class="sig-paren">(</span><em class="sig-param">data</em>, <em class="sig-param">loa</em>, <em class="sig-param">energy_type</em>, <em class="sig-param">total_label</em><span class="sig-paren">)</span><a class="headerlink" href="#EnergyIntensityIndicators.LMDI.LMDI.data_visualization" title="Permalink to this definition">¶</a></dt>
<dd><p>Format data for proper visualization</p>
<p>The following data types have been proposed (an ellipsis … indicates an optional parameter):</p>
<blockquote>
<div><p>&#64;filter|Category1|…Category2|…|Label#units</p>
<p>A list of options that can be grouped by 1 or more categories.
&#64;weight|Category1|…Category2|…|Label#units</p>
<p>A weighted value to use with a matching filter (must match filter label and categories).
&#64;scenario|Label</p>
<p>A list of options that are completely separate from each other, i.e. they will not be seen on the same chart at the same time.
The options come from the unique values in the scenario column.
&#64;timeseries|Label</p>
<p>A list of options that can be used to make a time series, e.g. a list of years.
&#64;geography|Label</p>
<p>A list of geography names, e.g. states, counties, cities, that can be used in charts or a choropleth map.
&#64;geoid</p>
<p>The column values are geography IDs that can be used in a choropleth map.
&#64;latlong</p>
<p>Latitude and longitude coordinates</p>
</div></blockquote>
<dl>
<dt>Example Data Schema:</dt><dd><table class="docutils align-default">
<colgroup>
<col style="width: 9%" />
<col style="width: 6%" />
<col style="width: 12%" />
<col style="width: 18%" />
<col style="width: 19%" />
<col style="width: 19%" />
<col style="width: 19%" />
</colgroup>
<thead>
<tr class="row-odd"><th class="head"><p>“&#64;Geography”</p></th>
<th class="head"><p>“&#64;Year”</p></th>
<th class="head"><p>“&#64;filter|Sector”</p></th>
<th class="head"><p>“&#64;filter|Measure|Activity”</p></th>
<th class="head"><p>“&#64;filter|Measure|Structure”</p></th>
<th class="head"><p>“&#64;filter|Measure|Intensity”</p></th>
<th class="head"><p>“&#64;filter|Measure|Weight”</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p>National</p></td>
<td><p>2000</p></td>
<td><p>A</p></td>
<td><p>0</p></td>
<td><p>0</p></td>
<td><p>0</p></td>
<td><p>0</p></td>
</tr>
<tr class="row-odd"><td><p>National</p></td>
<td><p>2000</p></td>
<td><p>B</p></td>
<td><p>0</p></td>
<td><p>0</p></td>
<td><p>0</p></td>
<td><p>0</p></td>
</tr>
<tr class="row-even"><td><p>National</p></td>
<td><p>2010</p></td>
<td><p>A</p></td>
<td><p>0.8123</p></td>
<td><p>.6931</p></td>
<td><p>-0.1823</p></td>
<td><p>86.56</p></td>
</tr>
<tr class="row-odd"><td><p>National</p></td>
<td><p>2010</p></td>
<td><p>B</p></td>
<td><p>0.8123</p></td>
<td><p>-0.287</p></td>
<td><p>-0.287</p></td>
<td><p>33.07</p></td>
</tr>
</tbody>
</table>
</dd>
</dl>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>Returns</strong> – </p></li>
<li><p><strong>csv</strong> – </p></li>
</ul>
</dd>
</dl>
</dd></dl>

<dl class="method">
<dt id="EnergyIntensityIndicators.LMDI.LMDI.ensure_same_indices">
<code class="sig-name descname">ensure_same_indices</code><span class="sig-paren">(</span><em class="sig-param">df1</em>, <em class="sig-param">df2</em><span class="sig-paren">)</span><a class="headerlink" href="#EnergyIntensityIndicators.LMDI.LMDI.ensure_same_indices" title="Permalink to this definition">¶</a></dt>
<dd><p>Returns two dataframes with the same indices
purpose: enable dataframe operations such as multiply and divide between the two dfs</p>
</dd></dl>

<dl class="method">
<dt id="EnergyIntensityIndicators.LMDI.LMDI.sum_product">
<code class="sig-name descname">sum_product</code><span class="sig-paren">(</span><em class="sig-param">component_</em>, <em class="sig-param">weights</em>, <em class="sig-param">name</em><span class="sig-paren">)</span><a class="headerlink" href="#EnergyIntensityIndicators.LMDI.LMDI.sum_product" title="Permalink to this definition">¶</a></dt>
<dd><p>Calculate the sum product of a log-ratio component and
log mean divisia weights, rename column in the resulting dataframe</p>
</dd></dl>

<dl class="method">
<dt id="EnergyIntensityIndicators.LMDI.LMDI.use_intersection">
<em class="property">static </em><code class="sig-name descname">use_intersection</code><span class="sig-paren">(</span><em class="sig-param">data</em>, <em class="sig-param">intersection_</em><span class="sig-paren">)</span><a class="headerlink" href="#EnergyIntensityIndicators.LMDI.LMDI.use_intersection" title="Permalink to this definition">¶</a></dt>
<dd><p>Select portion of dataframe where index is in <a href="#id1"><span class="problematic" id="id2">intersection_</span></a></p>
</dd></dl>

</dd></dl>

<div class="toctree-wrapper compound">
<ul>
<li class="toctree-l1"><a class="reference internal" href="EnergyIntensityIndicators.multiplicative_lmdi.html">Multiplicative LMDI</a><ul class="simple">
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="EnergyIntensityIndicators.additive_lmdi.html">AdditiveLMDI</a><ul class="simple">
</ul>
</li>
</ul>
</div>
</div>


           </div>
           
          </div>
          <footer>
  
    <div class="rst-footer-buttons" role="navigation" aria-label="footer navigation">
      
        <a href="EnergyIntensityIndicators.multiplicative_lmdi.html" class="btn btn-neutral float-right" title="Multiplicative LMDI" accesskey="n" rel="next">Next <span class="fa fa-arrow-circle-right"></span></a>
      
      
        <a href="../../index.html" class="btn btn-neutral float-left" title="Welcome to EnergyIntensityIndicators’s documentation!" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left"></span> Previous</a>
      
    </div>
  

  <hr/>

  <div role="contentinfo">
    <p>
        &copy; Copyright 2020, NREL

    </p>
  </div>
  Built with <a href="http://sphinx-doc.org/">Sphinx</a> using a <a href="https://github.com/rtfd/sphinx_rtd_theme">theme</a> provided by <a href="https://readthedocs.org">Read the Docs</a>. 

</footer>

        </div>
      </div>

    </section>

  </div>
  


  <script type="text/javascript">
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script>

  
  
    
   

</body>
</html>